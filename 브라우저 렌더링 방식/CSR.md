# CSR (Client Side Rendering \_ 클라이언트 사이드 렌더링)

사용자의 요청에 따라 필요한 부분만 응답 받아 렌더링 하는 방식
<br/>

> 렌더링 과정

1. 클라이언트에서 초기 화면을 로드하기 위해 서버에 요청을 보냅니다

2. 서버는 html 화면에 표시에 필요한 완전한 리소스를 응답합니다
   - 자바스크립트를 사용하여 사용자와 상호 작용 후에 페이지 내용을 로드
   - 서버사이드 렌더링 방식과 다른 점은 모든 js 파일을 다운받아 하기 때문에 초기 로딩 시간의 오래 걸린다
3. 화면에 구성하는 요소를 변경하게 될 경우 클라이언트는 이전와 같이 서버에 요청을 보냅니다

4. 서버는 변경된 부분과 관련된 리소스만 응답합니다.
   - 서버사이드 렌더링 방식과 다르게 화면이 깜빡이지 않고 바로 수정된 데이터가 표시됩니다.

<br/>

> 장점

1. 빠른 속도
   url 이 바뀌어도 html을 다시 내려받지 않고 client 측에서 그려낼 수 있다.
   유저가 url을 이동해도 서버로부터 새로운 html 내려받지 않고, 클라이언트에서 그려낼 수 있기 때문에 화면 깜빡임 없이 앱과 같은 사용 경험 제공

2. 서버 부하 감소
   클라이언트 사이드 렌더링방식은 변경된 부분과 관련된 데이터만 가져오므로 서버사이드 랜더링 보다 속도가 빠르고 변경된 부분만 요청함으로써 서버의 부담을 줄일 수 있습니다

3. 사용자 친화적
   페이지 안에 컨텐츠를 클릭하여 다음 단계로 전환하는 과정에서 깜빡임 없이 부드러운 이동을 경험할 수 있습니다.

> 단점

1. SEO 분리

   - 웹 크롤러 가 페이지를 색인화 하려고 하면 내용의 빈페이지 처럼 보이게 됩니다.
   - html 기반으로 요소들의 정보를 찾는 국내 검색봇들에게 빈 html을 내려주는 CSR에서는 검색엔진 최적화 대응이 힘들어지는 단점 존재

2. 초기 로딩 속도가 느리다
   - 사용자가 첫 화면을 보는 시점이 늦어진다.
   - 클라이언트 사이드 렌더링은 초기에 모든 js 파일을 다운받아 와야 하기 때문에 초기 로딩 시간이 오래 걸립니다
   - 서비스 사이즈가 커질 수록 번들링되는 js 파일의 크기가 커지기 때문에 실제로 웹페이지가 그려져 사용자에게 첫화면을 제공하는 시점이 늦어질 수 밖에 없다 = 사용자가 웹사이트를 처음으로 들어왔을 때 그려지는(=interaction) 것을 보는 데까지 시간이 오래 걸린다
     -> code splitting 으로 어느 정도 해결할 수 있다

<br/>

> 보완

1. code splitting<br/>
   url마다 자바스크립트 파일을 쪼개 각각의 번들링된 js 파일을 만들어 첫 로드 시간을 줄이고, 유저가 그 첫 화면을 보는 데까지 시간이 빨라진다.

2. SSR + CSR<br/>
   첫 페이지는 서버에서 내려받아 html을 그대로 랜더링하고, 이후의 라우팅 처리는 클라이언트 사이드 렌더링 방식으로 동작하게 한다.
   유저가 url를 이동해도 페이지 깜빡임 없이 배틀 사용할 수 있게 되어 CSR의 장점도 가져갈 수 있게
   클라이언트에서는 DOM을 그대로 그리기만 하면 당연히 검색엔진 최적화 대응이 가능해지고 code splitting 안했을 때 CSR 방식보다 사용자가 화면을 보는 타이밍도 빨라진다.

<!-- 그럼 어떤 방식으로 개발해야 하나요

- 콘텐츠 중심으로 개발해야 합니다
- 클라이언트 사이드 렌더링 방식을 채택하여 개발한다고 했을 때 모든 부분을 클라이언트 사이드 렌더링 방식으로 구현 해야 하는 것은 아닙니다

애플리케이션을 구성하는 부분에 따라 단순 정보 제공과 같은 부분은 서버사이드 렌더링 방식으로 동적인 변화가 필요한 부분은 클라이언트 사이드 라이트 는 다른 방식으로 개발 하는게 좋습니다

> 단점 극복하기 위해

첫 페이지는 서버에서 내려받아 랜더링하고(서버에서 받은 html 그대로 보여주고),
그 뒤 라우팅 처리는 클라이언트 사이드 렌더링 방식으로 동작하게 한다.

-> 첫 페이지는 서버 받는다는 의미는 비어있는 html문서를 대신 내용이 채워진 html 파일을 받고 클라이언트에서는 DOM을 그대로 그리기만 하면 당연히 검색엔진 최적화 대응이 가능해지고 code splitting 안했을 때 CSR 방식보다 사용자가 화면을 보는 타이밍도 빨라집니다.
(js -> DOM으로 전환하는 과정없이, 이후 interaction이 가능한 js 파일을 따로 load)
-> 그 이후는 CSR 방식으로 동작하게 하면 유저가 url를 이동해도 페이지 깜빡임 없이 배틀 사용할 수 있게 되어 CSR의 장점도 가져갈 수 있게 됩니다.
CSR + SSR 각각의 장점을 합친 방식 구현을 할 수 있도록 도와주는 프레임워크 -> Next.js (코드 splitting이나 ssr을 조금 더 쉽게 할 수 있도록 해주는 리액트 라이브러리)

첫페이지 서버사이드 랜더링 + (내부적으로) 링크 / 라우터 : 클라이언트사이드랜더링 (새로운 Html 받지 않고 CSS 방식의 js 파일이 실행되어 엘리먼트 /돔요소만 내용이 변경된다)

1. 사용자가 처음 들어왔을 때 SSR 방식 -> 서버 에서 받은 html로 돔을 그리고
2. 이후 내부적으로는 CSR 방식으로 동작하게 한다. (next/link, 라우터) -->
